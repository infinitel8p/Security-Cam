"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[9977],{2780:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>d,contentTitle:()=>a,default:()=>u,frontMatter:()=>n,metadata:()=>o,toc:()=>l});var i=s(4848),r=s(8453);const n={slug:"fix-the-stream",title:"Fix the stream",authors:["ludo"],tags:["stream","python","dashboard"]},a=void 0,o={permalink:"/Security-Cam/blog/fix-the-stream",editUrl:"https://github.com/infinitel8p/Security-Cam/edit/main/documentation/blog/2024-08-21-stream.mdx",source:"@site/blog/2024-08-21-stream.mdx",title:"Fix the stream",description:"Fixing old issues",date:"2024-08-21T00:00:00.000Z",tags:[{inline:!1,label:"Stream",permalink:"/Security-Cam/blog/tags/stream",description:"Stream related posts."},{inline:!1,label:"Python",permalink:"/Security-Cam/blog/tags/python",description:"Python related posts."},{inline:!1,label:"Dashboard",permalink:"/Security-Cam/blog/tags/dashboard",description:"Web Interface related posts."}],readingTime:.885,hasTruncateMarker:!0,authors:[{name:"Ludovico Ferrara",title:"Maintainer of Security-Cam",url:"https://github.com/infinitel8p",imageURL:"https://avatars.githubusercontent.com/u/50703696?s=400&u=761df587f17316eb28a4768b8092ec4dbc137f1c&v=4",key:"ludo",page:null}],frontMatter:{slug:"fix-the-stream",title:"Fix the stream",authors:["ludo"],tags:["stream","python","dashboard"]},unlisted:!1,prevItem:{title:"Upgrading to the Raspberry Pi Zero 2 W",permalink:"/Security-Cam/blog/switch-to-raspberry-pi-zero-2"},nextItem:{title:"Build a Dashboard",permalink:"/Security-Cam/blog/starting-the-dashboard"}},d={authorsImageUrls:[void 0]},l=[{value:"Fixing old issues",id:"fixing-old-issues",level:3}];function c(e){const t={code:"code",h3:"h3",p:"p",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h3,{id:"fixing-old-issues",children:"Fixing old issues"}),"\n",(0,i.jsxs)(t.p,{children:["In my previous setup, I used ",(0,i.jsx)(t.code,{children:"picamera"})," for recording and streaming video on the Raspberry Pi. However, I noticed a recurring issue: the video stream would consistently freeze whenever a recording started, only resuming after the recording was complete. While this wasn't a big problem, it was frustrating enough to warrant a closer look."]}),"\n",(0,i.jsxs)(t.p,{children:["To address this, I decided to explore an alternative approach using ",(0,i.jsx)(t.code,{children:"OpenCV"}),". I wrote a small test script that streams frames to a ",(0,i.jsx)(t.code,{children:"Flask"})," endpoint. After modifying the ",(0,i.jsx)(t.code,{children:"ClientVideoPlayer"})," component in our placeholder dashboard, I successfully established a stable video stream. The next step was to test whether the video could be recorded while maintaining a continuous and stable feed to the dashboard\u2014and I'm happy to report that this was a success."]}),"\n",(0,i.jsxs)(t.p,{children:["As a result, we're transitioning from using ",(0,i.jsx)(t.code,{children:"picamera"})," and ",(0,i.jsx)(t.code,{children:"WebSockets"})," for streaming to using ",(0,i.jsx)(t.code,{children:"Flask"})," and ",(0,i.jsx)(t.code,{children:"OpenCV"}),". While I still have a few more tests to conduct before finalizing this decision, resolving the most frustrating issue from the old code feels like a significant step forward."]})]})}function u(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,t,s)=>{s.d(t,{R:()=>a,x:()=>o});var i=s(6540);const r={},n=i.createContext(r);function a(e){const t=i.useContext(n);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(n.Provider,{value:t},e.children)}}}]);
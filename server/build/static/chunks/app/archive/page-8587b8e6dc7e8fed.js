(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[467],{3250:function(e,o,t){Promise.resolve().then(t.bind(t,270))},270:function(e,o,t){"use strict";t.r(o);var n=t(7437),c=t(2265);o.default=()=>{let[e,o]=(0,c.useState)([]),[t,a]=(0,c.useState)("");(0,c.useEffect)(()=>{a("".concat(window.location.protocol,"//").concat(window.location.hostname,":5005/archive"))},[]),(0,c.useEffect)(()=>{(async()=>{if(t)try{let e=await fetch(t);if(!e.ok)throw Error("Network response was not ok");let n=await e.json();o(n)}catch(e){console.error("Error fetching videos:",e)}})()},[t]);let i=e=>{console.log("Delete video: ".concat(e))};return(0,n.jsx)("div",{className:"grid grid-cols-3 gap-5 text-center",children:e.length>0?e.map((e,o)=>{let t,c;let a=e.split("/").pop();if(!a)return null;let l=a.match(/\d+/g);if(l){let[e,o]=l;t="".concat(e.slice(0,4),"-").concat(e.slice(4,6),"-").concat(e.slice(6,8)),c="".concat(o.slice(0,2),":").concat(o.slice(2,4),":").concat(o.slice(4,6))}else console.error("No match found in the filename");return(0,n.jsxs)("div",{className:"border border-red-500 flex flex-col justify-between m-2 p-2",children:[(0,n.jsxs)("video",{controls:!0,className:"w-full",onLoadedMetadata:e=>{let t=e.target.duration;document.getElementById("duration-".concat(o)).textContent="Duration: ".concat(Math.floor(t/60),"m ").concat(Math.floor(t%60),"s")},children:[(0,n.jsx)("source",{src:"".concat(window.location.protocol,"//").concat(window.location.hostname,":5005/stream_video?video_path=").concat(encodeURIComponent(e)),type:"video/mp4"}),"Your browser does not support the video tag."]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{children:a}),(0,n.jsxs)("p",{children:["Recorded on ",t,", ",c]}),(0,n.jsx)("p",{id:"duration-".concat(o),children:"Loading duration..."}),(0,n.jsxs)("div",{className:"flex justify-around mt-2",children:[(0,n.jsx)("button",{className:"bg-red-500 text-white px-4 py-2",onClick:()=>i(e),children:"Delete"}),(0,n.jsx)("a",{href:"".concat(window.location.protocol,"//").concat(window.location.hostname,":5005/stream_video?video_path=").concat(encodeURIComponent(e)),className:"bg-blue-500 text-white px-4 py-2",download:e.split("/").pop(),children:"Download"})]})]})]},o)}):(0,n.jsx)("p",{children:0===e.length?"No videos available.":"Loading videos..."})})}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=3250)}),_N_E=e.O()}]);